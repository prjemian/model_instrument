<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>instrument.utils &#8212; instrument</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <script src="../_static/documentation_options.js?v=59fadc99"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Software License" href="../license.html" />
    <link rel="prev" title="instrument.plans" href="plans.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="instrument-utils">
<span id="api-utils"></span><h1><code class="docutils literal notranslate"><span class="pre">instrument.utils</span></code><a class="headerlink" href="#instrument-utils" title="Link to this heading">¶</a></h1>
<p>Add Python modules here that provide any other code not covered by callbacks,
configs, core, devices, or plans.</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#module-instrument.utils.aps_functions" title="instrument.utils.aps_functions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aps_functions</span></code></a></p></td>
<td><p>APS utility helper functions</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#module-instrument.utils.controls_setup" title="instrument.utils.controls_setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">controls_setup</span></code></a></p></td>
<td><p>EPICS &amp; ophyd related setup</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#module-instrument.utils.helper_functions" title="instrument.utils.helper_functions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">helper_functions</span></code></a></p></td>
<td><p>Generic utility helper functions</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#module-instrument.utils.logging_setup" title="instrument.utils.logging_setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logging_setup</span></code></a></p></td>
<td><p>Configure logging for this session.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#module-instrument.utils.metadata" title="instrument.utils.metadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">metadata</span></code></a></p></td>
<td><p>RunEngine Metadata</p></td>
</tr>
</tbody>
</table>
<section id="aps-utility-helper-functions">
<span id="module-instrument.utils.aps_functions"></span><h2>APS utility helper functions<a class="headerlink" href="#aps-utility-helper-functions" title="Link to this heading">¶</a></h2>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.aps_functions.host_on_aps_subnet" title="instrument.utils.aps_functions.host_on_aps_subnet"><code class="xref py py-obj docutils literal notranslate"><span class="pre">host_on_aps_subnet</span></code></a>()</p></td>
<td><p>Detect if this host is on an APS subnet.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.aps_functions.aps_dm_setup" title="instrument.utils.aps_functions.aps_dm_setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aps_dm_setup</span></code></a>(dm_setup_file)</p></td>
<td><p>APS Data Management setup</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.aps_functions.aps_dm_setup">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.aps_functions.</span></span><span class="sig-name descname"><span class="pre">aps_dm_setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dm_setup_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/aps_functions.html#aps_dm_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.aps_functions.aps_dm_setup" title="Link to this definition">¶</a></dt>
<dd><section id="aps-data-management-setup">
<h2>APS Data Management setup<a class="headerlink" href="#aps-data-management-setup" title="Link to this heading">¶</a></h2>
<p>Read the bash shell script file used by DM to setup the environment. Parse any
<code class="docutils literal notranslate"><span class="pre">export</span></code> lines and add their environment variables to this session.  This is
done by brute force here since the APS DM environment setup requires different
Python code than bluesky and the two often clash.</p>
<p>This setup must be done before any of the DM package libraries are called.</p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.aps_functions.host_on_aps_subnet">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.aps_functions.</span></span><span class="sig-name descname"><span class="pre">host_on_aps_subnet</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/aps_functions.html#host_on_aps_subnet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.aps_functions.host_on_aps_subnet" title="Link to this definition">¶</a></dt>
<dd><p>Detect if this host is on an APS subnet.</p>
</dd></dl>

<section id="epics-ophyd-related-setup">
<span id="module-instrument.utils.controls_setup"></span><h2>EPICS &amp; ophyd related setup<a class="headerlink" href="#epics-ophyd-related-setup" title="Link to this heading">¶</a></h2>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.controls_setup.oregistry" title="instrument.utils.controls_setup.oregistry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">oregistry</span></code></a></p></td>
<td><p>Registry of all ophyd-style Devices and Signals.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.controls_setup.set_control_layer" title="instrument.utils.controls_setup.set_control_layer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_control_layer</span></code></a>([control_layer])</p></td>
<td><p>Communications library between ophyd and EPICS Channel Access.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.controls_setup.set_timeouts" title="instrument.utils.controls_setup.set_timeouts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_timeouts</span></code></a>()</p></td>
<td><p>Set default timeout for all EpicsSignal connections &amp; communications.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.controls_setup.epics_scan_id_source" title="instrument.utils.controls_setup.epics_scan_id_source"><code class="xref py py-obj docutils literal notranslate"><span class="pre">epics_scan_id_source</span></code></a>(scan_id_epics, _md)</p></td>
<td><p>Callback function for RunEngine.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.controls_setup.connect_scan_id_pv" title="instrument.utils.controls_setup.connect_scan_id_pv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect_scan_id_pv</span></code></a>(RE[, pv])</p></td>
<td><p>Define a PV to use for the RunEngine's <cite>scan_id</cite>.</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.controls_setup.connect_scan_id_pv">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.controls_setup.</span></span><span class="sig-name descname"><span class="pre">connect_scan_id_pv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">RE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/controls_setup.html#connect_scan_id_pv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.controls_setup.connect_scan_id_pv" title="Link to this definition">¶</a></dt>
<dd><p>Define a PV to use for the RunEngine’s <cite>scan_id</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.controls_setup.epics_scan_id_source">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.controls_setup.</span></span><span class="sig-name descname"><span class="pre">epics_scan_id_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan_id_epics</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_md</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/controls_setup.html#epics_scan_id_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.controls_setup.epics_scan_id_source" title="Link to this definition">¶</a></dt>
<dd><p>Callback function for RunEngine.  Returns <em>next</em> scan_id to be used.</p>
<ul class="simple">
<li><p>Ignore metadata dictionary passed as argument.</p></li>
<li><p>Get current scan_id from PV.</p></li>
<li><p>Apply lower limit of zero.</p></li>
<li><p>Increment (so that scan_id numbering starts from 1).</p></li>
<li><p>Set PV with new value.</p></li>
<li><p>Return new value.</p></li>
</ul>
<p>Exception will be raised if PV is not connected when next
<code class="docutils literal notranslate"><span class="pre">bps.open_run()</span></code> is called.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="instrument.utils.controls_setup.oregistry">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.controls_setup.</span></span><span class="sig-name descname"><span class="pre">oregistry</span></span><a class="headerlink" href="#instrument.utils.controls_setup.oregistry" title="Link to this definition">¶</a></dt>
<dd><p>Registry of all ophyd-style Devices and Signals.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.controls_setup.set_control_layer">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.controls_setup.</span></span><span class="sig-name descname"><span class="pre">set_control_layer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">control_layer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'PyEpics'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/controls_setup.html#set_control_layer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.controls_setup.set_control_layer" title="Link to this definition">¶</a></dt>
<dd><p>Communications library between ophyd and EPICS Channel Access.</p>
<p>Choices are: PyEpics (default) or caproto.</p>
<p>OPHYD_CONTROL_LAYER is an application of “lessons learned.”</p>
<p>Only used in a couple rare cases where PyEpics code was failing.
It’s defined here since it was difficult to find how to do this
in the ophyd documentation.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.controls_setup.set_timeouts">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.controls_setup.</span></span><span class="sig-name descname"><span class="pre">set_timeouts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/controls_setup.html#set_timeouts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.controls_setup.set_timeouts" title="Link to this definition">¶</a></dt>
<dd><p>Set default timeout for all EpicsSignal connections &amp; communications.</p>
</dd></dl>

<section id="generic-utility-helper-functions">
<span id="module-instrument.utils.helper_functions"></span><h2>Generic utility helper functions<a class="headerlink" href="#generic-utility-helper-functions" title="Link to this heading">¶</a></h2>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.helper_functions.running_in_queueserver" title="instrument.utils.helper_functions.running_in_queueserver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">running_in_queueserver</span></code></a>()</p></td>
<td><p>Detect if running in the bluesky queueserver.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.helper_functions.debug_python" title="instrument.utils.helper_functions.debug_python"><code class="xref py py-obj docutils literal notranslate"><span class="pre">debug_python</span></code></a>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.helper_functions.mpl_setup" title="instrument.utils.helper_functions.mpl_setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mpl_setup</span></code></a>()</p></td>
<td><p>Matplotlib setup based on environment (Notebook or non-Notebook).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.helper_functions.is_notebook" title="instrument.utils.helper_functions.is_notebook"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_notebook</span></code></a>()</p></td>
<td><p>Detect if running in a notebook.</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.helper_functions.debug_python">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.helper_functions.</span></span><span class="sig-name descname"><span class="pre">debug_python</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/helper_functions.html#debug_python"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.helper_functions.debug_python" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.helper_functions.is_notebook">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.helper_functions.</span></span><span class="sig-name descname"><span class="pre">is_notebook</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/helper_functions.html#is_notebook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.helper_functions.is_notebook" title="Link to this definition">¶</a></dt>
<dd><p>Detect if running in a notebook.</p>
<p>see: <a class="reference external" href="https://stackoverflow.com/a/39662359/1046449">https://stackoverflow.com/a/39662359/1046449</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.helper_functions.mpl_setup">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.helper_functions.</span></span><span class="sig-name descname"><span class="pre">mpl_setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/helper_functions.html#mpl_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.helper_functions.mpl_setup" title="Link to this definition">¶</a></dt>
<dd><p>Matplotlib setup based on environment (Notebook or non-Notebook).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.helper_functions.running_in_queueserver">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.helper_functions.</span></span><span class="sig-name descname"><span class="pre">running_in_queueserver</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/helper_functions.html#running_in_queueserver"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.helper_functions.running_in_queueserver" title="Link to this definition">¶</a></dt>
<dd><p>Detect if running in the bluesky queueserver.</p>
</dd></dl>

<p id="module-instrument.utils.logging_setup">Configure logging for this session.</p>
<p class="rubric">Public</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.logging_setup.configure_logging" title="instrument.utils.logging_setup.configure_logging"><code class="xref py py-obj docutils literal notranslate"><span class="pre">configure_logging</span></code></a>()</p></td>
<td><p>Configure logging as described in file.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Internal</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.logging_setup._setup_console_logger" title="instrument.utils.logging_setup._setup_console_logger"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_setup_console_logger</span></code></a>(logger, cfg)</p></td>
<td><p>Reconfigure the root logger as configured by the user.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.logging_setup._setup_file_logger" title="instrument.utils.logging_setup._setup_file_logger"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_setup_file_logger</span></code></a>(logger, cfg)</p></td>
<td><p>Record log messages in file(s).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.logging_setup._setup_ipython_logger" title="instrument.utils.logging_setup._setup_ipython_logger"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_setup_ipython_logger</span></code></a>(logger, cfg)</p></td>
<td><p>Internal: Log IPython console session In and Out to a file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.logging_setup._setup_module_logging" title="instrument.utils.logging_setup._setup_module_logging"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_setup_module_logging</span></code></a>(cfg)</p></td>
<td><p>Internal: Set logging level for each named module.</p></td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://blueskyproject.io/bluesky/main/debugging.html">https://blueskyproject.io/bluesky/main/debugging.html</a></p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.logging_setup._setup_console_logger">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.logging_setup.</span></span><span class="sig-name descname"><span class="pre">_setup_console_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/logging_setup.html#_setup_console_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.logging_setup._setup_console_logger" title="Link to this definition">¶</a></dt>
<dd><p>Reconfigure the root logger as configured by the user.</p>
<p>We can’t apply user configurations in <code class="docutils literal notranslate"><span class="pre">configure_logging()</span></code> above
because the code to read the config file triggers initialization of
the logging system.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.basicConfig">https://docs.python.org/3/library/logging.html#logging.basicConfig</a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.logging_setup._setup_file_logger">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.logging_setup.</span></span><span class="sig-name descname"><span class="pre">_setup_file_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/logging_setup.html#_setup_file_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.logging_setup._setup_file_logger" title="Link to this definition">¶</a></dt>
<dd><p>Record log messages in file(s).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.logging_setup._setup_ipython_logger">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.logging_setup.</span></span><span class="sig-name descname"><span class="pre">_setup_ipython_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/logging_setup.html#_setup_ipython_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.logging_setup._setup_ipython_logger" title="Link to this definition">¶</a></dt>
<dd><p>Internal: Log IPython console session In and Out to a file.</p>
<p>See <code class="docutils literal notranslate"><span class="pre">logrotate?</span></code> int he IPython console for more information.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.logging_setup._setup_module_logging">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.logging_setup.</span></span><span class="sig-name descname"><span class="pre">_setup_module_logging</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/logging_setup.html#_setup_module_logging"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.logging_setup._setup_module_logging" title="Link to this definition">¶</a></dt>
<dd><p>Internal: Set logging level for each named module.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.logging_setup.addLoggingLevel">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.logging_setup.</span></span><span class="sig-name descname"><span class="pre">addLoggingLevel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">levelName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levelNum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">methodName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/logging_setup.html#addLoggingLevel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.logging_setup.addLoggingLevel" title="Link to this definition">¶</a></dt>
<dd><p>Comprehensively adds a new logging level to the <cite>logging</cite> module and the
currently configured logging class.</p>
<p><cite>levelName</cite> becomes an attribute of the <cite>logging</cite> module with the value
<cite>levelNum</cite>. <cite>methodName</cite> becomes a convenience method for both <cite>logging</cite>
itself and the class returned by <cite>logging.getLoggerClass()</cite> (usually just
<cite>logging.Logger</cite>). If <cite>methodName</cite> is not specified, <cite>levelName.lower()</cite> is
used.</p>
<p>To avoid accidental clobberings of existing attributes, this method will
raise an <cite>AttributeError</cite> if the level name is already an attribute of the
<cite>logging</cite> module or if the method name is already present</p>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">addLoggingLevel</span><span class="p">(</span><span class="s1">&#39;TRACE&#39;</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="s2">&quot;TEST&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="s1">&#39;that worked&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="s1">&#39;so did this&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">TEST</span>
<span class="go">5</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.logging_setup.configure_logging">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.logging_setup.</span></span><span class="sig-name descname"><span class="pre">configure_logging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/logging_setup.html#configure_logging"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.logging_setup.configure_logging" title="Link to this definition">¶</a></dt>
<dd><p>Configure logging as described in file.</p>
</dd></dl>

<section id="runengine-metadata">
<span id="module-instrument.utils.metadata"></span><h2>RunEngine Metadata<a class="headerlink" href="#runengine-metadata" title="Link to this heading">¶</a></h2>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.metadata.MD_PATH" title="instrument.utils.metadata.MD_PATH"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MD_PATH</span></code></a></p></td>
<td><p>PersistentDict Directory to save RE metadata between sessions.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.metadata.get_md_path" title="instrument.utils.metadata.get_md_path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_md_path</span></code></a>()</p></td>
<td><p>Get PersistentDict directory for RE metadata.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.metadata.re_metadata" title="instrument.utils.metadata.re_metadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">re_metadata</span></code></a>([cat])</p></td>
<td><p>Programmatic metadata for the RunEngine.</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py data">
<dt class="sig sig-object py" id="instrument.utils.metadata.MD_PATH">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.metadata.</span></span><span class="sig-name descname"><span class="pre">MD_PATH</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'/home/runner/.config/Bluesky_RunEngine_md'</span></em><a class="headerlink" href="#instrument.utils.metadata.MD_PATH" title="Link to this definition">¶</a></dt>
<dd><p>PersistentDict Directory to save RE metadata between sessions.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.metadata.get_md_path">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.metadata.</span></span><span class="sig-name descname"><span class="pre">get_md_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/metadata.html#get_md_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.metadata.get_md_path" title="Link to this definition">¶</a></dt>
<dd><p>Get PersistentDict directory for RE metadata.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.metadata.re_metadata">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.metadata.</span></span><span class="sig-name descname"><span class="pre">re_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/metadata.html#re_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.metadata.re_metadata" title="Link to this definition">¶</a></dt>
<dd><p>Programmatic metadata for the RunEngine.</p>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">instrument</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../demo.html">Demo: Notebook Startup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sessions.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging_config.html">Session logging</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API: The Source Code</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="startup.html"><code class="docutils literal notranslate"><span class="pre">instrument.startup</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html"><code class="docutils literal notranslate"><span class="pre">instrument.callbacks</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="configs.html"><code class="docutils literal notranslate"><span class="pre">instrument.configs</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html"><code class="docutils literal notranslate"><span class="pre">instrument.core</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="devices.html"><code class="docutils literal notranslate"><span class="pre">instrument.devices</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="plans.html"><code class="docutils literal notranslate"><span class="pre">instrument.plans</span></code></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">instrument.utils</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">Software License</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">API: The Source Code</a><ul>
      <li>Previous: <a href="plans.html" title="previous chapter"><code class="docutils literal notranslate"><span class="pre">instrument.plans</span></code></a></li>
      <li>Next: <a href="../license.html" title="next chapter">Software License</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023-2024, APS BCDA.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/api/utils.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>